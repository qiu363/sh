function Swipe(t,n){"use strict";function e(){p=b.children,g=p.length,p.length<2&&(n.continuous=!1),v.transitions&&n.continuous&&p.length<3&&(b.appendChild(p[0].cloneNode(!0)),b.appendChild(b.children[1].cloneNode(!0)),p=b.children),m=new Array(p.length),w=t.getBoundingClientRect().width||t.offsetWidth,b.style.width=p.length*w+"px";for(var e=p.length;e--;){var i=p[e];i.style.width=w+"px",i.setAttribute("data-index",e),v.transitions&&(i.style.left=e*-w+"px",s(e,E>e?-w:e>E?w:0,0))}n.continuous&&v.transitions&&(s(a(E-1),-w,0),s(a(E+1),w,0)),v.transitions||(b.style.left=E*-w+"px"),t.style.visibility="visible"}function i(){n.continuous?o(E-1):E&&o(E-1)}function r(){n.continuous?o(E+1):E<p.length-1&&o(E+1)}function a(t){return(p.length+t%p.length)%p.length}function o(t,e){if(E!=t){if(v.transitions){var i=Math.abs(E-t)/(E-t);if(n.continuous){var r=i;i=-m[a(t)]/w,i!==r&&(t=-i*p.length+t)}for(var o=Math.abs(E-t)-1;o--;)s(a((t>E?t:E)-o-1),w*i,0);t=a(t),s(E,w*i,e||x),s(t,0,e||x),n.continuous&&s(a(t-i),-(w*i),0)}else t=a(t),l(E*-w,t*-w,e||x);E=t,h(n.callback&&n.callback(E,p[E]))}}function s(t,n,e){c(t,n,e),m[t]=n}function c(t,n,e){var i=p[t],r=i&&i.style;r&&(r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=e+"ms",r.webkitTransform="translate("+n+"px,0)translateZ(0)",r.msTransform=r.MozTransform=r.OTransform="translateX("+n+"px)")}function l(t,e,i){if(!i)return void(b.style.left=e+"px");var r=+new Date,a=setInterval(function(){var o=+new Date-r;return o>i?(b.style.left=e+"px",T&&u(),n.transitionEnd&&n.transitionEnd.call(event,E,p[E]),void clearInterval(a)):void(b.style.left=(e-t)*(Math.floor(o/i*100)/100)+t+"px")},4)}function u(){_=setTimeout(r,T)}function d(){T=0,clearTimeout(_)}var f=function(){},h=function(t){setTimeout(t||f,0)},v={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var n=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var e in n)if(void 0!==t.style[n[e]])return!0;return!1}(document.createElement("swipe"))};if(t){var p,m,w,g,b=t.children[0];n=n||{};var E=parseInt(n.startSlide,10)||0,x=n.speed||300;n.continuous=void 0!==n.continuous?n.continuous:!0;var _,y,T=n.auto||0,S={},$={},J={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":h(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":h(this.transitionEnd(t));break;case"resize":h(e)}n.stopPropagation&&t.stopPropagation()},start:function(t){var n=t.touches[0];S={x:n.pageX,y:n.pageY,time:+new Date},y=void 0,$={},b.addEventListener("touchmove",this,!1),b.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){n.disableScroll&&t.preventDefault();var e=t.touches[0];$={x:e.pageX-S.x,y:e.pageY-S.y},"undefined"==typeof y&&(y=!!(y||Math.abs($.x)<Math.abs($.y))),y||(t.preventDefault(),d(),n.continuous?(c(a(E-1),$.x+m[a(E-1)],0),c(E,$.x+m[E],0),c(a(E+1),$.x+m[a(E+1)],0)):($.x=$.x/(!E&&$.x>0||E==p.length-1&&$.x<0?Math.abs($.x)/w+1:1),c(E-1,$.x+m[E-1],0),c(E,$.x+m[E],0),c(E+1,$.x+m[E+1],0)))}},end:function(){var t=+new Date-S.time,e=Number(t)<250&&Math.abs($.x)>20||Math.abs($.x)>w/2,i=!E&&$.x>0||E==p.length-1&&$.x<0;n.continuous&&(i=!1);var r=$.x<0;y||(e&&!i?(r?(n.continuous?(s(a(E-1),-w,0),s(a(E+2),w,0)):s(E-1,-w,0),s(E,m[E]-w,x),s(a(E+1),m[a(E+1)]-w,x),E=a(E+1)):(n.continuous?(s(a(E+1),w,0),s(a(E-2),-w,0)):s(E+1,w,0),s(E,m[E]+w,x),s(a(E-1),m[a(E-1)]+w,x),E=a(E-1)),n.callback&&n.callback(E,p[E])):n.continuous?(s(a(E-1),-w,x),s(E,0,x),s(a(E+1),w,x)):(s(E-1,-w,x),s(E,0,x),s(E+1,w,x))),b.removeEventListener("touchmove",J,!1),b.removeEventListener("touchend",J,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==E&&(T&&u(),n.transitionEnd&&n.transitionEnd.call(t,E,p[E]))}};return e(),T&&u(),v.addEventListener?(v.touch&&b.addEventListener("touchstart",J,!1),v.transitions&&(b.addEventListener("webkitTransitionEnd",J,!1),b.addEventListener("msTransitionEnd",J,!1),b.addEventListener("oTransitionEnd",J,!1),b.addEventListener("otransitionend",J,!1),b.addEventListener("transitionend",J,!1)),window.addEventListener("resize",J,!1)):window.onresize=function(){e()},{setup:function(){e()},slide:function(t,n){d(),o(t,n)},prev:function(){d(),i()},next:function(){d(),r()},stop:function(){d()},getPos:function(){return E},getNumSlides:function(){return g},kill:function(){d(),b.style.width="",b.style.left="";for(var t=p.length;t--;){var n=p[t];n.style.width="",n.style.left="",v.transitions&&c(t,0,0)}v.addEventListener?(b.removeEventListener("touchstart",J,!1),b.removeEventListener("webkitTransitionEnd",J,!1),b.removeEventListener("msTransitionEnd",J,!1),b.removeEventListener("oTransitionEnd",J,!1),b.removeEventListener("otransitionend",J,!1),b.removeEventListener("transitionend",J,!1),window.removeEventListener("resize",J,!1)):window.onresize=null}}}}"function"!=typeof $.tpl&&($.tpl=function(){var t={},n=function e(n,i){var r=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<#").join("    ").replace(/((^|#>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)#>/g,"',$1,'").split("   ").join("');").split("#>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):t[n]=t[n]||e(document.getElementById(n).innerHTML);return i?r(i):r};return n}()),(window.jQuery||window.Zepto)&&!function(t){t.fn.Swipe=function(n){return this.each(function(){t(this).data("Swipe",new Swipe(t(this)[0],n))})}}(window.jQuery||window.Zepto)


