<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8" />
    <title>中发智造：欢迎入驻中关村智能制造创新中心</title>
    <meta name="keywords" content="中发智造">
    <meta name="description" content="入驻中发智造，参与产业协同，融入创新生态！">
    <meta name="viewport" content="width=320, user-scalable=no, target-densitydpi=device-dpi">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link type="text/css" href="./styles/style.css" rel="stylesheet">
    <meta name="x5-page-mode" content="app" />
    <meta name="imagemode" content="force" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta name="browsermode" content="application" />
</head>
<body>

<section class="main-loading">
    <div class="loading-cont" id="J_loading">
        <div class="crub-1"></div>
        <div class="crub-2"></div>
        <div class="crub-3"></div>

        <div class="line-1"></div>
        <div class="line-2"></div>

        <div class="cirle-2"></div>
        <div class="cirle-3"></div>
        <div class="cirle-4"></div>

        <div class="circle-1s c-1s-a"></div>
        <div class="circle-1s c-1s-b"></div>
        <div class="circle-1s c-1s-c"></div>

        <div class="loaded-tips" id="J_loading_tips"></div>
    </div>
</section>

<section class="main-build hide" id="J_page_1">
    <div class="build-man-w">
        <div class="build-man"></div>
    </div>
    <img src="./images/building.jpg" class="building-img">
    <div class="build-door">
        <div class="door-l"></div>
        <div class="door-r"></div>
    </div>

    <div class="build-cloud-a b-c-a-a1"></div>
    <div class="build-cloud-a b-c-a-a2"></div>
    <div class="build-cloud-b"></div>
</section>

<section class="main-floor hide" id="J_floor">
    <div class="floor">
        <div class="floor-bg"></div>
        <div class="floor-man-w">
            <div class="floor-man"></div>
        </div>
    </div>
    <div class="floor-door"></div>
</section>

<section class="main-ckxy hide" id="J_page_2">
    <div class="title">
        <img src="./images/title_ckxy.png">
    </div>
    <div class="ckxy-cont">
        <div class="ckxy-computer">
            <div class="ckxy-computer-screen" id="J_ckxy_screen">
            </div>
        </div>
        <div class="ckxy-up"></div>
        <div class="ckxy-b"></div>
    </div>
</section>

<section class="main-cpsjzx hide" id="J_page_3">
    <div class="title">
        <img src="./images/title_cpsjzx.png">
    </div>
    <div class="cpsj-cont">
        <div class="cpsj-man">
            <div class="cpsj-man-img"></div>
            <div class="cpsj-watch"></div>
            <div class="cpsj-img"></div>
            <div class="cpsj-chair"></div>
            <div class="cpsj-mouse"></div>
            <div class="cpsj-key"></div>
            <div class="cpsj-jp"></div>
        </div>
    </div>
</section>

<section class="main-jjfa hide" id="J_page_4">
    <div class="title">
        <img src="./images/title_jjfa.png">
    </div>
    <div class="jjfa-cont">
        <div class="jjfa-man"></div>

        <div class="jjfa-tx"></div>
        <div class="jjfa-ck1"></div>
        <div class="jjfa-cgq"></div>
        <div class="jjfa-jbz"></div>
        <div class="jjfa-jzy"></div>
        <!-- <div class="jjfa-36k"></div> -->
    </div>
</section>

<section class="main-yqj hide" id="J_page_5">
    <div class="title">
        <img src="./images/title_yqj.png">
    </div>
    <div class="yqj-cont">
        <div class="yqj-bg-w">
            <div class="yqj-bg"></div>
        </div>
        <div class="yqj-man"></div>
    </div>
</section>

<section class="main-mjzz hide" id="J_page_6">
    <div class="title">
        <img src="./images/title_mjzz.png">
    </div>
    <div class="mjzz-cont">
        <div class="mjzz-woman"></div>
        <div class="mjzz-light"></div>
    </div>
</section>

<section class="main-cpzs hide" id="J_page_7">
    <div class="title">
        <img src="./images/title_cpzs.png">
    </div>
    <div class="cpzs-cont">
        <div class="cpzs-img-w" id="slider">
            <ul class="cpzs-img-list">
                <li>
                    <img src="./images/cpzs_phone.png">
                </li>
                <li>
                    <img src="./images/cpzs_photo.png">
                </li>
                <li>
                    <img src="./images/cpzs_computer.png">
                </li>
            </ul>
        </div>
        <div class="cpzs-arrow-l" id="J_arrow_l"></div>
        <div class="cpzs-arrow-r" id="J_arrow_r"></div>
        <div class="cpzs-station"></div>
    </div>
</section>

<section class="main-xc hide" id="J_page_8">
    <img src="./images/msg_bg.png" class="xc-img">
    <div class="xc-down hide" id="J_xc_down"></div>
</section>

<section class="main-cj hide" id="J_page_10">
    <img src="./images/cjinfo.png" class="cj-img">
    <div class="xc-down hide" id="J_cj_down"></div>
</section>

<section class="main-form" id="J_page_9">
    <div class="form">
        <input type="text" value="" class="form-txt" id="J_name">
        <input type="text" value="" class="form-txt" id="J_job">
        <input type="text" value="" class="form-txt" id="J_company">
        <input type="text" value="" class="form-txt" id="J_hxyw">
        <input type="text" value="" class="form-txt" id="J_phone">
        <div class="form-sub" id="J_submit"></div>
    </div>
</section>

<div class="next-btn hide" id="J_next_btn"></div>

<audio autoplay="autoplay" loop="loop" id="J_music">
    <source src="./data/music.ogg" type="audio/ogg">
    <source src="./data/music.mp3" type="audio/mpeg">
    Your browser does not support the audio tag.
</audio>

<script type="text/javascript" src="./js/zepto.min.js"></script>
<script type="text/javascript" src="./js/swipe.js"></script>
<script type="text/javascript">
    ;(function(){
        //首屏加载图片
        var first_img = [
            "./images/crub_1.png",
            "./images/crub_2.png",
            "./images/crub_3.png",
            "./images/line1.png",
            "./images/line2.png"
        ];
        var first_loading_num = 0;
        for (var i = 0; i < first_img.length; i++){
            var img = new Image();
            img.src = first_img[i];

            img.onload = function(){
                first_loading_num++;
                if (first_loading_num == first_img.length) {
                    $("#J_loading").addClass("loadstart-cont");

                    loading();

                    setTimeout(function () {
                        $("#J_loading").removeClass("loadstart-cont").addClass("load-cont");
                    }, 1500);
                }
            };
        }

        function loading () {
            var second_arr = [
                "./images/man.png",
                "./images/man_trun.png",
                "./images/building.jpg",
                "./images/door_l.png",
                "./images/door_r.png",
                "./images/cloud.png",
                "./images/cloud1.png",
                "./images/floor_door.png",
                "./images/floor.png"
            ];

            var second_loading_num = 0;
            for (var i = 0; i < second_arr.length; i++){
                var img = new Image();
                img.src = second_arr[i];

                img.onload = function(){
                    second_loading_num++;

                    if(second_loading_num == second_arr.length){
                        setTimeout(function () {
                            $("#J_loading").removeClass("load-cont").addClass("loaded-cont");
                        }, 3000);

                        setTimeout(function () {
                            page1();

                            $("#J_floor").css({
                                display: "block"
                            });
                        }, 3500);
                    }
                };
            }
        }

        var page = 0;
        
        function page1 () {
            $("#J_loading").parent().hide();
            $("#J_page_1").show().css({
                "transform": "translate3d(0, 0, 0)"
            });

            var page1_timer = setTimeout(function () {
                $("#J_page_1").addClass("build-ani");
            }, 1000);
            var page1_door_timer = setTimeout(function () {
                $(".build-door").addClass("build-open-door");
                $(".build-man-w").css({
                    "-webkit-transform": "translate3d(104px, 0, 0)"
                });
                $("#J_page_1").removeClass("build-ani");
            }, 2500);
            var page1_man_timer = setTimeout(function () {
                $(".build-man-w").css({
                    
                });
                $(".build-man-w").css({
                    "-webkit-transition": "all .4s cubic-bezier(0, 0, 0, 1.0)",
                    "zIndex": 25,
                    "-webkit-transform": "translate3d(104px, 0, 0) scale(.8, .8)"
                });
            }, 3000);
            var page1_close_door_timer = setTimeout(function () {
                $(".build-door").removeClass("build-open-door");
            }, 3500);
            var floor_open_timer = setTimeout(function () {
                floor();
            }, 4100);
        }

        function floor () {
            $("#J_page_2").css({
                display: "block"
            });

            $("#J_page_1").css({
                "opacity": 0,
                "-webkit-transform": "translate3d(-50%, -80%, 0) scale(2, 2)"
            });

            $("#J_floor").css({
                "opacity": 1,
                "-webkit-transform": "translate3d(0, 0, 0) scale(1, 1)"
            });

            var floor_start_timer = setTimeout(function () {
                $("#J_page_1").hide();

                $("#J_floor").addClass("floor-page2");
            }, 1000);

            setTimeout(function () {
                $(".floor-door").css({
                    zIndex: 50
                });
            }, 2400);

            var floor_page2_timer = setTimeout(function () {
                main_ani["ckxy"]();
            }, 4000);
        }

        var swipe_i = 0;
        var swipeObj = '';
        var main_ani = {
            ckxy: function  () {
                $("#J_floor").css({
                    "opacity": 0,
                    "-webkit-transform": "translate3d(-80%, -80%, 0) scale(3, 3)"
                });
                $("#J_page_2").css({
                    "opacity": 1,
                    "-webkit-transform": "translate3d(0, 0, 0) scale(1, 1)"
                });

                var ckxy_timer = setTimeout(function () {
                    $("#J_floor").hide;

                    $("#J_page_2").addClass("page-cur");

                    var html = "";
                    var screen_arr = [[0, 1, 8], [0, 1, 16], [0, 1, 16]];
                    var screen_i = 0;
                    for (var i = 0; i < screen_arr.length; i++){
                        for (var k = 0; k < screen_arr[i][2]; k++){
                            (function (k, i, screen_i) {
                                setTimeout(function () {
                                    html += k % 2 == 0 ? "0" : "1";
                                    $("#J_ckxy_screen").html(html +"<em></em>");

                                    if (k == screen_arr[i][2] - 1) {
                                        html += "<br>";
                                    }
                                }, 120 * screen_i);
                            })(k, i, screen_i);

                            screen_i++;
                        }
                        
                    }
                }, 1000);

                $("#J_page_3").css({
                    display: "block"
                });

                setTimeout(function () {
                    page = 3;
                    $("#J_next_btn").show();
                }, 2000);
            },
            cpsjzx: function (){
                $("#J_floor").css({
                    "opacity": 0,
                    "-webkit-transform": "translate3d(86%, -70%, 0) scale(3, 3)"
                });
                $("#J_page_3").css({
                    "opacity": 1,
                    "-webkit-transform": "translate3d(0, 0, 0) scale(1, 1)"
                });

                setTimeout(function () {
                    $("#J_floor").hide;

                    $("#J_page_3").addClass("page-cur");
                }, 1000);

                $("#J_page_"+ page).css({
                    display: "block"
                });

                setTimeout(function () {
                    $("#J_next_btn").show();
                }, 2000);
            },
            jjfa: function (){
                $("#J_floor").css({
                    "opacity": 0,
                    "-webkit-transform": "translate3d(-80%, -44%, 0) scale(3, 3)"
                });
                $("#J_page_4").css({
                    "opacity": 1,
                    "-webkit-transform": "translate3d(0, 0, 0) scale(1, 1)"
                });

                setTimeout(function () {
                    $("#J_floor").hide;

                    $("#J_page_4").addClass("page-cur");
                }, 1000);

                $("#J_page_"+ page).css({
                    display: "block"
                });

                setTimeout(function () {
                    $("#J_next_btn").show();
                }, 3000);
            },
            yqj: function (){
                $("#J_floor").css({
                    "opacity": 0,
                    "-webkit-transform": "translate3d(86%, -20%, 0) scale(3, 3)"
                });
                $("#J_page_5").css({
                    "opacity": 1,
                    "-webkit-transform": "translate3d(0, 0, 0) scale(1, 1)"
                });

                setTimeout(function () {
                    $("#J_floor").hide;

                    $("#J_page_5").addClass("page-cur");
                }, 1000);

                $("#J_page_"+ page).css({
                    display: "block"
                });

                setTimeout(function () {
                    $("#J_next_btn").show();
                }, 2000);
            },
            mjzz: function (){
                $("#J_floor").css({
                    "opacity": 0,
                    "-webkit-transform": "translate3d(-80%, 6%, 0) scale(3, 3)"
                });
                $("#J_page_6").css({
                    "opacity": 1,
                    "-webkit-transform": "translate3d(0, 0, 0) scale(1, 1)"
                });

                setTimeout(function () {
                    $("#J_floor").hide;

                    $("#J_page_6").addClass("page-cur");
                }, 1000);

                $("#J_page_"+ page).css({
                    display: "block"
                });

                setTimeout(function () {
                    $("#J_next_btn").show();
                }, 2000);

                swipeObj = Swipe(document.getElementById('slider'), {
                    startSlide: 0,
                    speed: 500,
                    callback: function (pos, node) {
                        swipe_i = pos;
                    },
                    transitionEnd: function () {

                    }
                });
            },
            cpzs: function (){
                $("#J_floor").css({
                    "opacity": 0,
                    "-webkit-transform": "translate3d(86%, 30%, 0) scale(3, 3)"
                });
                $("#J_page_7").css({
                    "opacity": 1,
                    "-webkit-transform": "translate3d(0, 0, 0) scale(1, 1)"
                });

                setTimeout(function () {
                    $("#J_floor").hide;

                    $("#J_page_7").addClass("page-cur");
                }, 1000);

                $("#J_page_"+ page).css({
                    display: "block"
                });

                setTimeout(function () {
                    $("#J_next_btn").show();
                }, 2000);
            },
            form: function (){
                $("#J_floor").css({
                    "opacity": 0,
                    "-webkit-transform": "translate3d(-80%, 50%, 0) scale(3, 3)"
                });
                $("#J_page_8").css({
                    "opacity": 1,
                    "-webkit-transform": "translate3d(0, 0, 0) scale(1, 1)"
                });

                $("#J_xc_down").show();

                setTimeout(function () {
                    $("#J_floor").hide;
                }, 1000);
            }
        };

        var step_arr = [
            [],
            [],
            [],
            [106, 140, 1, "ckxy"],
            [-106, 92, 0, "cpsjzx"],
            [106, 45, 1, "jjfa"],
            [-106, 0, 0, "yqj"],
            [106, -54, 1, "mjzz"],
            [-106, -100, 0, "cpzs"],
            [106, -144, 1, "form"],
        ];
        $("#J_next_btn").bind("tap", function () {
            $("#J_floor").css({
                "opacity": 1,
                "-webkit-transform": "translate3d(0, 0, 0) scale(1, 1)"
            });
            $("#J_page_"+ (page - 1)).css({
                "opacity": 0,
                "-webkit-transform": "translate3d("+ step_arr[page][0] +"px, "+ step_arr[page][1] +"px, 0) scale(0, 0)"
            });

            if (step_arr[page + 1][2] == 1) {
                $(".floor-man").css({
                    "background-image": "url(./images/man.png)"
                });
            } else {
                $(".floor-man").css({
                    "background-image": "url(./images/man_trun.png)"
                });
            }

            setTimeout(function () {
                $("#J_floor").removeClass("floor-page"+ (page - 1)).addClass("floor-page"+ page);

                page++;
            }, 1000);

            setTimeout(function () {
                main_ani[step_arr[page][3]]();
            }, 3100);

            $(this).hide();
        });

        $("#J_arrow_r").bind("tap", function () {
            if (swipe_i == 0) {
                swipe_i = 2;
            } else {
                swipe_i--;
            }
            swipeObj.slide(swipe_i, 500);
        });
        $("#J_arrow_l").bind("tap", function () {
            if (swipe_i == 2) {
                swipe_i = 0;
            } else {
                swipe_i++;
            }
            swipeObj.slide(swipe_i, 500);
        });

        $("#J_xc_down").bind("tap", function () {
            $("#J_page_8").css({
                "-webkit-transition": "all 1s cubic-bezier(0, 0, 0, 1.0)",
                "-webkit-transform": "translate3d(0, -100%, 0)"
            });
            $("#J_page_10").show().css({
                "-webkit-transform": "translate3d(0, 0, 0)"
            });

            $("#J_page_9").css({
                display: "block"
            });
        });
        /**
         * 向下翻页
         */
        var start_time = 0;
        var end_time = 0;
        var start_pos_x = 0;
        var start_pos_y = 0;
        var end_pos_x = 0;
        var end_pos_y = 0;
        $("#J_page_8").bind("touchstart", function(e){
            start_time = new Date().getTime();

            var touch = e.targetTouches[0];
            start_pos_x = touch.pageX;
            start_pos_y = touch.pageY;

            end_pos_x = 0;
            end_pos_y = 0;
        });
        $("#J_page_8").bind("touchmove", function(e){
            var touch = e.targetTouches[0];
            end_pos_x = touch.pageX;
            end_pos_y = touch.pageY;
        });
        $("#J_page_8").bind("touchend", function(e){
            end_time = new Date().getTime();

            //向下翻页
            if(end_time - start_time < 200 && end_pos_y - start_pos_y < -80 && end_pos_y > 0){
                $("#J_page_8").css({
                    "-webkit-transition": "all 1s cubic-bezier(0, 0, 0, 1.0)",
                    "-webkit-transform": "translate3d(0, -100%, 0)"
                });
                $("#J_page_10").show().css({
                    "-webkit-transform": "translate3d(0, 0, 0)"
                });

                setTimeout(function(){
                    $("#J_cj_down").show();
                }, 3000);

                $("#J_page_9").css({
                    display: "block"
                });
            }
        });

        $("#J_cj_down").bind("tap", function () {
            $("#J_page_10").css({
                "-webkit-transition": "all 1s cubic-bezier(0, 0, 0, 1.0)",
                "-webkit-transform": "translate3d(0, -100%, 0)"
            });
            $("#J_page_9").show().css({
                "-webkit-transform": "translate3d(0, -100%, 0)"
            });

            prevent_def_touch = 0;
        });
        /**
         * 向下翻页
         */
        $("#J_page_10").bind("touchstart", function(e){
            start_time = new Date().getTime();

            var touch = e.targetTouches[0];
            start_pos_x = touch.pageX;
            start_pos_y = touch.pageY;

            end_pos_x = 0;
            end_pos_y = 0;
        });
        $("#J_page_10").bind("touchmove", function(e){
            var touch = e.targetTouches[0];
            end_pos_x = touch.pageX;
            end_pos_y = touch.pageY;
        });
        $("#J_page_10").bind("touchend", function(e){
            end_time = new Date().getTime();

            //向下翻页
            if(end_time - start_time < 200 && end_pos_y - start_pos_y < -80 && end_pos_y > 0){
                $("#J_page_10").css({
                    "-webkit-transition": "all 1s cubic-bezier(0, 0, 0, 1.0)",
                    "-webkit-transform": "translate3d(0, -100%, 0)"
                });
                $("#J_page_9").show().css({
                    "-webkit-transform": "translate3d(0, -100%, 0)"
                });

                prevent_def_touch = 0;
            }
        });

        var is_sub = 0;
        $("#J_submit").click(function(){
            if (is_sub == 1) {
                return false;
            }

            var name = $("#J_name").val();
            var job = $("#J_job").val();
            var company = $("#J_company").val();
            var hxyw = $("#J_hxyw").val();
            var phone = $("#J_phone").val();

            if(name == ""){
                alert("姓名不能为空");
                return false;
            }
            if(job == ""){
                alert("职位不能为空");
                return false;
            }
            if(company == "企业名称不能为空"){
                alert("");
                return false;
            }
            if(hxyw == ""){
                alert("核心业务不能为空");
                return false;
            }
            if(!/^\d{11}$/.test(phone)){
                alert("手机号码格式错误");
                return false;
            }

            is_sub = 1;

            $("#J_loading").removeClass("loaded-cont");

            $.ajax({
                url: "ajax.php",
                data: {
                    name: name,
                    job: job,
                    company: company,
                    hxyw: hxyw,
                    phone: phone
                },
                dataType: "json",
                type: "POST",
                success: function(data) {
                    if (data.code == 0) {
                        $("#J_loading").addClass("loadstart-cont").parent().show();

                        setTimeout(function () {
                            $("#J_loading").removeClass("loadstart-cont").addClass("load-cont");
                        }, 3000);

                        $("#J_page_8").hide();
                        $("#J_page_9").hide();

                        $("#J_loading_tips").html("感谢您的参与！");

                        prevent_def_touch = 1;
                    } else {
                        alert(data.msg);
                    }

                    is_sub = 0;
                }
            });
        });
        
        var prevent_def_touch = 1;
        $("body").bind("touchmove", function(e){
            if (prevent_def_touch == 1) {
                e.preventDefault();
            }
        });

        $("#J_music")[0].play();
    }());
</script>

<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript">
    /*wx.config({
        debug: false,
        appId: appid,
        timestamp: timestamp,
        nonceStr: nonceStr,
        signature: signature,
        jsApiList: [
            'onMenuShareTimeline',
            'onMenuShareAppMessage'
        ]
    });

    wx.ready(function(){
        wx.onMenuShareAppMessage({
          title: '中发智造：中关村智能制造创新中心',
          desc: '入驻中发智造，参与产业协同，融入创新生态！',
          link: window.location.href,
          imgUrl: 'http://123.57.145.94/sh/zf/images/building.jpg',
          trigger: function (res) {

          },
          success: function (res) {

          },
          cancel: function (res) {

          },
          fail: function (res) {

          }
        });

        wx.onMenuShareTimeline({
          title: '中发智造：中关村智能制造创新中心',
          link: window.location.href,
          imgUrl: 'http://123.57.145.94/sh/zf/images/building.jpg',
          trigger: function (res) {

          },
          success: function (res) {

          },
          cancel: function (res) {

          },
          fail: function (res) {
            
          }
        });
    });*/
</script>

</body>
</html>